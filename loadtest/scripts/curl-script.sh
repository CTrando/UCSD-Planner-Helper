# test if the logic works

queriesDept=1024
queriesData=1024
queriesClasses=1024

# hardcode some popular courses
# make the databse busy
declare -a courseArr=(
"COGS 1"
"COGS 2"
"COGS 3"
"COGS 9"
"COGS 11"
"COGS 13"
"COGS 17"
"MUS 16"
"BIBC 100"
"TDGE 10"
"TDGE 11"
"TDGE 25"
"CHIN 10BN"
"SIO 35"
"TDTR 10"
"ANTH 21"
"PHIL 10"
"PHIL 27"
"MATH 10A"
"MATH 10B"
"MATH 10C"
"MATH 20A"
"MATH 20B"
"MATH 20C"
"MATH 102"
"MATH 18"
"MATH 109"
"CSE 8A"
"CSE 8B"
"CSE 11"
"CSE 12"
"CSE 15L"
"CSE 20"
"CSE 21"
"CSE 30"
"CSE 100"
"CSE 101"
"CSE 105"
"CSE 110"
"CSE 140"
"CSE 140L"
"ECE 5"
"ECE 15"
"ECE 16"
"ECE 25"
"ECE 35"
"ECE 45"
"ECE 65"
"ECE 100"
"ECE 101"
"ECE 102"
"ECE 109"
"ECON 1"
"ECON 2"
"ECON 3"
"ECON 4"
"ECON 5"
"ECON 100A"
"ECON 100B"
"ECON 100BH"
"BILD 1"
"BILD 2"
"BILD 3"
"BILD 4"
"BILD 12"
"LTEN 22"
"LTEN 26"
"LTEN 29"
"LTEN 107"
"LTEN 110"
"LTEN 127"
"LTEN 149"
"LTEN 153"
"LTEN 178"
"LISP 1B"
"LISP 1BX"
"LISP 1C"
"LISP 1CX"
"MAE 5"
"MAE 7"
"MAE 8"
"MAE 11"
"MAE 20"
"MAE 101A"
)

# manually add more strings for popular depts
# to simulate real life situation
# -100% accurate
declare -a deptArr=(
"HIUS"
"HIEA"
"GPEC"
"CAT"
"LIDS"
"AESE"
"MATH"
"MATH"
"MATH"
"MATH"
"MATH"
"MATH"
"MATH"
"MATH"
"MATH"
"JUDA"
"EMED"
"ERC"
"ECON"
"ECON"
"ECON"
"ECON"
"ECON"
"ECON"
"ECON"
"GLBH"
"LTGK"
"BISP"
"ENVR"
"VIS"
"VIS"
"VIS"
"VIS"
"VIS"
"HIGR"
"TDPF"
"FPM"
"GPGN"
"SOCI"
"SOCI"
"SOCI"
"SOCI"
"TDTR"
"BGRD"
"LTCH"
"BIPN"
"SE"
"COGS"
"COGS"
"COGS"
"COGS"
"COGS"
"COGS"
"COGS"
"COGS"
"ANES"
"PHIL"
"LTFR"
"OPTH"
"ANTH"
"PEDS"
"CGS"
"CGS"
"TDHD"
"TDHD"
"BGSE"
"WARR"
"LTIT"
"ANBI"
"MATS"
"LTLA"
"ANAR"
"HUM"
"GPLA"
"GPCO"
"BIBC"
"NEU"
"HILD"
"LTWL"
"SIOG"
"HINE"
"CLAS"
"PATH"
"RELI"
"RELI"
"RELI"
"RELI"
"USP"
"BICD"
"LIPO"
"SOCG"
"MUS"
"MUS"
"MUS"
"MUS"
"UROL"
"SIOB"
"PHAR"
"DERM"
"LTTH"
"RMAS"
"BENG"
"CLIN"
"HIEU"
"CLRE"
"PSY"
"PSY"
"PSY"
"PSY"
"SIO"
"TWS"
"HIAF"
"RMED"
"HISC"
"LTKO"
"MUIR"
"MCWP"
"MAE"
"ANSC"
"AIP"
"LTGM"
"BNFO"
"PSYC"
"PSYC"
"PSYC"
"PSYC"
"GPIM"
"DDPM"
"WCWP"
"WCWP"
"WCWP"
"HITO"
"MMW"
"TDPR"
"SPPS"
"EXPR"
"ESYS"
"PHYS"
"SURG"
"HMNR"
"SOMI"
"ORTH"
"SIOC"
"TDDR"
"TDPW"
"BILD"
"BILD"
"BILD"
"BILD"
"BILD"
"MGT"
"CMM"
"GPPS"
"DSC"
"LTWR"
"AWP"
"AWP"
"AWP"
"AWP"
"AWP"
"AWP"
"AWP"
"AWP"
"AWP"
"ENG"
"COMM"
"COMM"
"COMM"
"EDS"
"FMPH"
"LIAB"
"FILM"
"TDGE"
"MED"
"POLI"
"RAD"
"TMC"
"MGTA"
"MGTF"
"NEUG"
"BGGN"
"BIEB"
"MBC"
"LTSP"
"LIIT"
"MSED"
"DSGN"
"HLAW"
"LISL"
"ECE"
"LTEA"
"DSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"CSE"
"HDP"
"LATI"
"TDAC"
"TDDM"
"LIFR"
"LTRU"
"SOCE"
"BIMM"
"BIOM"
"LTEN"
"LTEN"
"LTEN"
"LTEN"
"TDMV"
"LISP"
"LTCO"
"LIHL"
"COGR"
"TDDE"
"LIGN"
"SOMC"
"DOC"
"LTEU"
"CHEM"
"CHEM"
"CHEM"
"CHEM"
"CHEM"
"CHEM"
"AUD"
"CHIN"
"ETHN"
"MDE"
"MDE"
"MDE"
"MDE"
"MDE"
"NANO"
"JAPN"
"JAPN"
"JAPN"
"REV"
"HILA"
"LHCO"
"CENG"
"LIGM"
"WES"
"TDGR"
"INTL"
"TDHT"
"LTCS"
)

i_query=0

while [[ $i_query -lt $queriesDept ]]; do
   deptToQuery=${deptArr[$RANDOM % ${#deptArr[@]} ]}
   curl --proxy localhost:9053 --user-agent "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36" localhost:22125/api_classes?department=$deptToQuery > /dev/null
   # curl localhost:22125/api_classes?department=$deptToQuery
   i_query=$[$i_query+1]
done

i_query=0

while [[ $i_query -lt $queriesData ]]; do
   courseToQuery=${courseArr[$RANDOM % ${#courseArr[@]} ]}
   deptTQ=${courseToQuery% *}
   numTQ=${courseToQuery#* }
   curl --proxy localhost:9053 \
        --header "Content-Type: application/json" \
        --user-agent "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36" \
        --request POST \
        --data "{\"classes\":[{\"classTitle\":\"test\",\"courseNum\":\"$numTQ\",\"department\":\"$deptTQ\",\"priority\":0,\"conflicts\":null,\"instructor\":null}]}" \
        localhost:22125/api_data > /dev/null
   i_query=$[$i_query+1]
done

i_query=0

while [[ $i_query -lt $queriesClasses ]]; do
   curl --proxy localhost:9053 --user-agent "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36" localhost:22125/api_department > /dev/null
   i_query=$[$i_query+1]
done

# for i in "${deptArr[@]}"
# do
#    echo "$i"
#    # or do whatever with individual element of the array
# done

# curl --trace-ascii d.txt --trace-time --proxy localhost:9053 localhost:5000
# 
# curl --proxy localhost:9053 localhost:22125/api_department > /dev/null 2>&1
# curl --proxy localhost:9053 localhost:22125/api_classes?department=